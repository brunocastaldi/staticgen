<svg width="1800" height="1200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <style>
        .lane-label { font-family: 'Inter', sans-serif; font-size: 16px; font-weight: 700; }
        .node-rect { stroke-width: 1.5; }
        .node-text { font-family: 'Inter', sans-serif; font-size: 13px; font-weight: 600; fill: #ffffff; }
        .tool-text { font-family: 'Inter', sans-serif; font-size: 11px; font-weight: 400; fill: #ffffff; opacity: 0.85; }
        .connector { stroke: #4b5563; stroke-width: 2; fill: none; }
        .loop-label { font-family: 'Inter', sans-serif; font-size: 12px; font-weight: 600; fill: #4b5563; text-anchor: middle; }
        .node:hover > rect, .node:hover > path { filter: brightness(1.15); transition: filter 0.2s; }
    </style>
    <defs>
        <marker id="arrowhead" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#4b5563"/>
        </marker>
    </defs>

    <!-- SWIMLANES -->
    <g id="swimlanes">
        <rect x="0" y="0" width="1800" height="160" fill="#e0e7ff" stroke="#c7d2fe" stroke-width="1"/>
        <text x="20" y="85" class="lane-label" fill="#4338ca">1. Concepção e Escopo</text>
        <rect x="0" y="160" width="1800" height="160" fill="#d1fae5" stroke="#a7f3d0" stroke-width="1"/>
        <text x="20" y="245" class="lane-label" fill="#059669">2. Coleta e Preparação</text>
        <rect x="0" y="320" width="1800" height="160" fill="#fef3c7" stroke="#fde68a" stroke-width="1"/>
        <text x="20" y="405" class="lane-label" fill="#d97706">3. Engenharia de Features</text>
        <rect x="0" y="480" width="1800" height="160" fill="#fee2e2" stroke="#fecaca" stroke-width="1"/>
        <text x="20" y="565" class="lane-label" fill="#dc2626">4. Experimentação e Treino</text>
        <rect x="0" y="640" width="1800" height="160" fill="#e0f2fe" stroke="#bae6fd" stroke-width="1"/>
        <text x="20" y="725" class="lane-label" fill="#0284c7">5. Validação</text>
        <rect x="0" y="800" width="1800" height="160" fill="#e5e7eb" stroke="#d1d5db" stroke-width="1"/>
        <text x="20" y="885" class="lane-label" fill="#4b5563">6. Governança e Deploy</text>
        <rect x="0" y="960" width="1800" height="160" fill="#f5d0fe" stroke="#f0abfc" stroke-width="1"/>
        <text x="20" y="1045" class="lane-label" fill="#9333ea">7. Monitoramento</text>
    </g>

    <!-- NODES -->
    <g id="nodes">
        <!-- Phase 1 -->
        <g class="node" transform="translate(240, 45)"><title>Estudar viabilidade técnica e valor de negócio. Acessar dados no [DL].</title><rect class="node-rect" width="180" height="70" rx="8" fill="#4f46e5"/><text class="node-text" x="90" y="32" text-anchor="middle">Análise de Viabilidade</text><text class="tool-text" x="90" y="52" text-anchor="middle">[DL]</text></g>
        <g class="node" transform="translate(480, 45)"><title>Definir segmentos de clientes e produtos.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#4f46e5"/><text class="node-text" x="90" y="40" text-anchor="middle">Público-alvo</text></g>
        <g class="node" transform="translate(720, 45)"><title>Definir KPIs de negócio e de modelo (AUC, KS, PSI).</title><rect class="node-rect" width="180" height="70" rx="8" fill="#4f46e5"/><text class="node-text" x="90" y="40" text-anchor="middle">Métricas de Sucesso</text></g>
        <g class="node" transform="translate(960, 45)"><title>Especificar regras para o cálculo da variável-alvo.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#4f46e5"/><text class="node-text" x="90" y="32" text-anchor="middle">Definição de</text><text class="node-text" x="90" y="50" text-anchor="middle">Performance (Target)</text></g>
        
        <!-- Phase 2 -->
        <g class="node" transform="translate(240, 205)"><title>Ingestão e limpeza de dados brutos (Tabelas Silver).</title><rect class="node-rect" width="180" height="70" rx="8" fill="#10b981"/><text class="node-text" x="90" y="32" text-anchor="middle">Ingestão e Estruturação</text><text class="tool-text" x="90" y="52" text-anchor="middle">[DL/UC]</text></g>
        <g class="node" transform="translate(480, 205)"><title>Criar amostra de desenvolvimento estratificada.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#10b981"/><text class="node-text" x="90" y="40" text-anchor="middle">Amostragem (In-Time)</text></g>
        <g class="node" transform="translate(720, 205)"><title>Criar amostras com dados futuros para teste.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#10b981"/><text class="node-text" x="90" y="40" text-anchor="middle">Amostragem (OOT)</text></g>
        
        <!-- Phase 3 -->
        <g class="node" transform="translate(240, 365)"><title>Brainstorming e mapeamento de fontes de dados no Unity Catalog.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#f59e0b"/><text class="node-text" x="90" y="40" text-anchor="middle">Mapeamento de Fontes</text></g>
        <g class="node" transform="translate(480, 365)"><title>Criar pipelines e registrar features no Databricks Feature Store.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#f59e0b"/><text class="node-text" x="90" y="32" text-anchor="middle">Desenvolvimento de Features</text><text class="tool-text" x="90" y="52" text-anchor="middle">[FeatureStore]</text></g>
        <g class="node" transform="translate(720, 365)"><title>Analisar qualidade dos dados (missing, outliers).</title><rect class="node-rect" width="180" height="70" rx="8" fill="#f59e0b"/><text class="node-text" x="90" y="40" text-anchor="middle">Análise e Qualidade (EDA)</text></g>
        <g class="node" transform="translate(960, 365)"><title>Aplicar técnicas (IV, Gini, Boruta) para selecionar features.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#f59e0b"/><text class="node-text" x="90" y="40" text-anchor="middle">Seleção de Features</text></g>
        
        <!-- Phase 4 -->
        <g class="node" transform="translate(240, 525)"><title>Desenvolver um modelo simples (Regressão Logística) como benchmark.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#ef4444"/><text class="node-text" x="90" y="32" text-anchor="middle">Treino Baseline</text><text class="tool-text" x="90" y="52" text-anchor="middle">[MLflow]</text></g>
        <g class="node" transform="translate(480, 510)"><title>Rodar experimentos com H2O Driverless AI e/ou Databricks AutoML.</title><rect class="node-rect" width="180" height="50" rx="8" fill="#ef4444"/><text class="node-text" x="90" y="30" text-anchor="middle">AutoML [H2O/DBR]</text></g>
        <g class="node" transform="translate(480, 570)"><title>Treinar algoritmos customizados (XGBoost, LightGBM).</title><rect class="node-rect" width="180" height="50" rx="8" fill="#ef4444"/><text class="node-text" x="90" y="30" text-anchor="middle">Modelagem Manual [XGB]</text></g>
        <g class="node" transform="translate(720, 525)"><title>Comparar experimentos no MLflow UI e eleger o modelo campeão.</title><path class="node-rect" d="M 90,0 L 180,35 L 90,70 L 0,35 Z" fill="#ef4444"/><text class="node-text" x="90" y="40" text-anchor="middle">Seleção do Campeão</text></g>
        <g class="node" transform="translate(960, 525)"><title>Usar Optuna/Hyperopt para tuning fino de hiperparâmetros.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#ef4444"/><text class="node-text" x="90" y="32" text-anchor="middle">Otimização de</text><text class="node-text" x="90" y="50" text-anchor="middle">Hiperparâmetros [Optuna]</text></g>

        <!-- Phase 5 -->
        <g class="node" transform="translate(240, 685)"><title>Transformar probabilidade (PD) em score de crédito (0-1000).</title><rect class="node-rect" width="180" height="70" rx="8" fill="#3b82f6"/><text class="node-text" x="90" y="40" text-anchor="middle">Alinhamento de Score</text></g>
        <g class="node" transform="translate(480, 685)"><title>Escorar bases OOT para validar generalização e estabilidade.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#3b82f6"/><text class="node-text" x="90" y="40" text-anchor="middle">Testes de Robustez (OOT)</text></g>
        <g class="node" transform="translate(720, 685)"><title>Analisar comportamento do modelo em diferentes segmentos.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#3b82f6"/><text class="node-text" x="90" y="40" text-anchor="middle">Testes de Equidade e Viés</text></g>

        <!-- Phase 6 -->
        <g class="node" transform="translate(240, 845)"><title>Empacotar e registrar o modelo no MLflow Model Registry.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#6b7280"/><text class="node-text" x="90" y="32" text-anchor="middle">Documentação e Registro</text><text class="tool-text" x="90" y="52" text-anchor="middle">[Model Registry]</text></g>
        <g class="node" transform="translate(480, 845)"><title>Submeter modelo para comitê de validação (Risk, Compliance).</title><rect class="node-rect" width="180" height="70" rx="8" fill="#6b7280"/><text class="node-text" x="90" y="40" text-anchor="middle">Revisão e Aprovação</text></g>
        <g class="node" transform="translate(720, 845)"><title>Automatizar deploy do modelo a partir do Model Registry.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#6b7280"/><text class="node-text" x="90" y="32" text-anchor="middle">Pipeline de Implantação</text><text class="tool-text" x="90" y="52" text-anchor="middle">[CI/CD]</text></g>
        <g class="node" transform="translate(960, 845)"><title>Publicar modelo como endpoint ou job batch.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#6b7280"/><text class="node-text" x="90" y="32" text-anchor="middle">Implantação (Deploy)</text><text class="tool-text" x="90" y="52" text-anchor="middle">[DBR Serving]</text></g>

        <!-- Phase 7 -->
        <g class="node" transform="translate(240, 1005)"><title>Configurar dashboards para monitorar drift e performance.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#9333ea"/><text class="node-text" x="90" y="40" text-anchor="middle">Monitoramento Contínuo</text></g>
        <g class="node" transform="translate(480, 1005)"><title>Definir gatilhos automáticos (ex: PSI > 0.2) para retreino.</title><path class="node-rect" d="M 90,0 L 180,35 L 90,70 L 0,35 Z" fill="#9333ea"/><text class="node-text" x="90" y="40" text-anchor="middle">Estratégia de Retreino</text></g>
        <g class="node" transform="translate(720, 1005)"><title>Gerenciar o ciclo de vida dos modelos no Model Registry.</title><rect class="node-rect" width="180" height="70" rx="8" fill="#9333ea"/><text class="node-text" x="90" y="40" text-anchor="middle">Arquivamento</text></g>
    </g>

    <!-- CONNECTORS -->
    <g id="connectors" marker-end="url(#arrowhead)">
        <!-- Phase 1 connections -->
        <path class="connector" d="M 420 80 H 480"/>
        <path class="connector" d="M 660 80 H 720"/>
        <path class="connector" d="M 900 80 H 960"/>
        <path class="connector" d="M 1050 115 L 1050 160 L 330 160 L 330 205"/>
        
        <!-- Phase 2 connections -->
        <path class="connector" d="M 420 240 H 480"/>
        <path class="connector" d="M 660 240 H 720"/>
        <path class="connector" d="M 810 275 L 810 320 L 330 320 L 330 365"/>

        <!-- Phase 3 connections -->
        <path class="connector" d="M 420 400 H 480"/>
        <path class="connector" d="M 660 400 H 720"/>
        <path class="connector" d="M 900 400 H 960"/>
        <path class="connector" d="M 1050 435 L 1050 480 L 330 480 L 330 525"/>

        <!-- Phase 4 connections -->
        <path class="connector" d="M 420 560 L 480 535"/>
        <path class="connector" d="M 420 560 L 480 595"/>
        <path class="connector" d="M 660 535 L 720 560"/>
        <path class="connector" d="M 660 595 L 720 560"/>
        <path class="connector" d="M 900 560 H 960"/>
        <path class="connector" d="M 1050 595 L 1050 640 L 330 640 L 330 685"/>

        <!-- Phase 5 connections -->
        <path class="connector" d="M 420 720 H 480"/>
        <path class="connector" d="M 660 720 H 720"/>
        <path class="connector" d="M 810 755 L 810 800 L 330 800 L 330 845"/>

        <!-- Phase 6 connections -->
        <path class="connector" d="M 420 880 H 480"/>
        <path class="connector" d="M 660 880 H 720"/>
        <path class="connector" d="M 900 880 H 960"/>
        <path class="connector" d="M 1050 915 L 1050 960 L 330 960 L 330 1005"/>

        <!-- Phase 7 connections -->
        <path class="connector" d="M 420 1040 H 480"/>
        <path class="connector" d="M 660 1040 H 720"/>

        <!-- Retraining Loop -->
        <path class="connector" d="M 570 1075 L 570 1140 L 150 1140 L 150 240 L 240 240"/>
        <text class="loop-label" x="195" y="975">Retreinar</text>
    </g>
</svg>
